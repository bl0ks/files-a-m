/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.38.0/HERE_NOTICE
 */

H.service.util.eval("function Cw(a){var b;if(a)for(Dw={},b=a.length;b--;)Dw[a[b]]=!0;this.$k={}}var Ew,Dw={};Cw.prototype.parse=function(a,b,c){var d,e,f,g,h;Ew=!1;try{c=JSON.parse(c)}catch(m){Ew=!0}if(c&&(d=c.metadata)){var k={spatials:[]};for(e in d){if(c=!Dw[e]&&(f=Fw[e]))(g=d[e])||(Ew=!0,g=void 0),c=g;if(c)for(c=g.length;c--;){var l;(l=g[c])||(Ew=!0,l=void 0);(h=l)&&f(b,a,this,e,h,k)}}}else Ew=!0;return Ew?void 0:k};Cw.prototype.parse=Cw.prototype.parse;\nvar Fw={\"street labels\":function(a,b,c,d,e,f){var g;(g=e.vertices)||(Ew=!0,g=void 0);if(g){var h,k=g.length,l;(l=0<k)||(Ew=!0,l=void 0);if(l)for(h=Array(k/2);k;){var m=g[--k];l=g[--k];h[k/2]=new G(l,m)}h=h?{a:[h]}:B;k=+e[\"font size\"]/a.Ua();g=c.$k[k];g||(Gw.lineWidth=k,g=c.$k[k]=c.Bd.nj(Gw));Hw(a,b,h,!1,g,e,d,f)}delete e.vertices},\"city center labels\":function(a,b,c,d,e,f){Hw(a,b,Iw(e,new Mh([])),!0,c.Bd,e,d,f)},labels:function(a,b,c,d,e,f){var g;(g=e[\"bounding boxes\"])||(Ew=!0,g=void 0);if(g){for(var h=\ng.length,k=new Mh([]),l;h--;){var m;(m=g[h])||(Ew=!0,m=void 0);(l=m)&&Iw(l,k)}Hw(a,b,k,!0,c.Bd,e,d,f)}delete e[\"bounding boxes\"]},buildings:function(a,b,c,d,e,f){var g=e.id,h=b.ag[g],k,l,m,n=[],q=[];(k=e)||(Ew=!0,k=void 0);if(k&&((l=k.vertices)||(Ew=!0,l=void 0),l)){var r;(r=k.polygons)||(Ew=!0,r=void 0);(m=r)&&n.push.apply(n,Jw(l,m));(k=k.outlines)||(Ew=!0,k=void 0);(m=k)&&q.push.apply(q,Jw(l,m))}m=n.length;n.push.apply(n,q);q=new Mh(n,Ud,m);(n=n.length)||(Ew=!0,n=void 0);n&&(h?(Vq(h,a,[q]),f.spatials.push(h)):\n(h=Hw(a,b,q,!0,c.Bd,e,d,f,g),b.ba(h)))}};Fw[\"transit stops\"]=Fw.POIs=Fw.labels;var Kw=[\"box 2\",\"box 1\",\"annotation box\",\"icon box\"];function Iw(a,b){for(var c=Kw.length,d,e;c--;)if(d=Kw[c],e=a[d]){var f=e[0],g=e[1],h=e[2];e=e[3];b.a.push([new G(f,g),new G(f+h,g),new G(f+h,g+e),new G(f,g+e)]);delete a[d]}return b}\nfunction Jw(a,b){var c=b.length,d,e,f;if(0<c)for(e=Array(c);c--;)if((d=b[c])||(Ew=!0,d=void 0),d){var g=d.length;if(0<g)for(e[c]=f=Array(g);g--;){var h=2*d[g];f[g]=new G(a[h],a[h+1])}}return e||[]}var Lw={};function Hw(a,b,c,d,e,f,g,h,k){Lw.style=e;d=new Rq(b,d,k,Lw);c&&Vq(d,a,[c]);Mw(f);f.category=g;d.setData(f);h.spatials.push(d);d.ia(b);return d}Cw.prototype.Bd=new wh({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0});var Gw={};\nfunction Mw(a){var b,c=!1;switch(typeof a){case \"object\":if(a instanceof Array)for(b=a.length;b--;)Mw(a[b])?c=!0:delete a[b];else if(a)for(b in a)Mw(a[b])?c=!0:delete a[b];break;case \"number\":c=!0;break;default:c=!!a}return c};function Nw(a,b,c){c=c||{};b=b||{};var d=c.tileType||\"maptile\",e=c.scheme||\"normal.day\";T.call(this,{min:0,max:20});!0===b.pois&&(b.pois=\"!F\");this.K=b;if(!(a&&a instanceof Ow))throw Error(\"InvalidArgument: service required\");this.u=a;this.i=A(this.i,this);this.u.addEventListener(\"versionupdate\",this.i);this.B=a.C().clone().F(d+\"/\"+a.pc()+\"/\"+e).I(Pw).I(b);this.Y=a.f||null;this.N=c.pixelRatio||c.pixelratio||Te();this.tileSize=c.tileSize||256;this.tileType=d;this.scheme=e;this.c=new ar(new Cw(c.categoryFilter));\nthis.c.ia(this);this.v=A(this.v,this);this.c.addEventListener(\"update\",this.v);T.call(this,{min:0,max:20});this.s(new Pk(c.tileCacheSize||256,A(this.V,this)))}u(Nw,T);t(\"H.service.metaInfo.TileProvider\",Nw);Nw.prototype.V=function(a,b){a=b.Pa();for(var c=a.length,d;c--;)d=a[c],delete d.a[b.key],d.release();b.data&&(vp.push(b.Zf(),this.tileSize),b.$f())};Nw.prototype.v=function(){this.dispatchEvent(\"update\")};\nNw.prototype.G=function(a,b,c,d,e){var f=this.B.clone(),g=this.Y,h=this.tileSize,k=this.getTileKey(a,b,c);k=this.Fb().get(k);var l;if(k&&!k.Sd()){d(vp.pop(this.tileSize),null);var m={cancel:function(){}}}else{g&&f.za(g[(c+b+a)%g.length]);f.F(c+\"/\"+a+\"/\"+b+\"/\"+h+\"/png8\");var n=tp.setTimeout(function(){l=new tf(\"text/plain\",f.toString());l.then(function(q){d(null,q)},e)},500)}return m||{cancel:function(){l?l.cancel():tp.clearTimeout(n)}}};Nw.prototype.requestInternal=Nw.prototype.G;\nNw.prototype.Vb=function(a,b,c,d,e){var f=this.c;var g=d||vp.pop(this.tileSize);if(d)a=this.Fb().get(this.getTileKey(a,b,c)),a.T(d);else if(d=a=new Zk(this.hd(a,b,c),a,b,c,this.tileSize,this.N,c,f),delete d.j,d.m=e,a.T(g))for(e=a.Pa(),g=e.length;g--;)e[g].gg();else vp.push(g,this.tileSize);return a};Nw.prototype.createTileInternal=Nw.prototype.Vb;Nw.prototype.D=function(){this.c.D();this.u.removeEventListener(\"versionupdate\",this.i);T.prototype.D.call(this)};Nw.prototype.dispose=Nw.prototype.D;\nNw.prototype.i=function(){var a=this.u;this.B=a.C().clone().F(this.tileType+\"/\"+a.pc()+\"/\"+this.scheme).I(Pw).I(this.K);this.reload(!1)};var Pw={metadata:\"metaonly\",mgen:\"2\"};function Ow(a){Ow.l.constructor.call(this,Ow,a);a=Wp(this,a);this.f=a.shards;(this.b=a.ignoreTypes?null:a.type)&&this.C().za(this.b);this.c=a.version;this.j=new dq;\"newest\"===this.c&&Qw(this)}u(Ow,Vp);t(\"H.service.metaInfo.Service\",Ow);Ow.prototype.Ia=function(){return{type:\"base\",version:\"newest\",subDomain:\"maps.ls\",path:\"maptile/2.1\",shards:[\"1\",\"2\",\"3\",\"4\"]}};Ow.CONFIG_KEY=\"metaInfo\";function Rw(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}Ow.prototype.Gj=function(){return this.b};\nOw.prototype.pc=function(){return this.c};Ow.prototype.getVersion=Ow.prototype.pc;Ow.prototype.ca=function(){return this.j};Ow.prototype.getCopyrights=Ow.prototype.ca;\nfunction Qw(a){var b=a.C().clone().F(\"info\").I({output:\"json\"});a.f&&b.za(a.f[0]);a.G(b,function(c){c=c.response;var d;Rw(c,\"map\");Rw(c,\"scheme\");Rw(c,\"tiletype\");Rw(c,\"format\");Rw(c,\"resolution\");Rw(c,\"language\");if(\"newest\"===a.c&&\"traffic\"!==a.b)for(d in c.maps)c.maps[d].hash&&c.maps[d].newest&&(a.c=c.maps[d].hash,a.dispatchEvent(\"versionupdate\"));a.m=c;a.dispatchEvent(\"infoupdate\")},function(c){throw c;})}Ow.prototype.Be=function(){return this.m};Ow.prototype.getInfo=Ow.prototype.Be;\nOw.prototype.qe=function(a,b,c,d,e,f){return new Nw(this,d,{tileSize:a,pixelRatio:b,categoryFilter:c,tileType:e,scheme:f})};Ow.prototype.createTileProvider=Ow.prototype.qe;Ow.prototype.ic=function(a,b,c,d,e,f){return new ql(this.qe(a,b,c,d,e,f))};Ow.prototype.createTileLayer=Ow.prototype.ic;X.prototype.wj=function(a){return this.Ma(Ow,a)};X.prototype.getMetaInfoService=X.prototype.wj;(function(){var a=X.prototype.createDefaultLayers;X.prototype.createDefaultLayers=function(b,c,d,e,f,g){var h=a.call(this,b,c,d,e,f,g),k={},l=this.wj();\"object\"===typeof b&&(g=b,b=g.tileSize,c=g.ppi,d=g.lg,e=g.lg2,f=g.style,g=g.pois);b=b||256;var m=320===c?2:1;if(0>[72,250,320,500].indexOf(+c)){if(c!==B)throw new D(this.rf,1,c);}else k.ppi=+c;d&&(k.lg=d);e&&(k.lg2=e);f&&(k.style=f);g&&(k.pois=g);h.raster.normal.metaInfo=l.ic(b,m,[\"buildings\"],k);return h}})();\n");